{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/lib/db.js"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nexport const db = globalThis.prisma || new PrismaClient();\n\nif (process.env.NODE_ENV !== \"production\") globalThis.prisma = db;\n"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,KAAK,WAAW,MAAM,IAAI,IAAI,6HAAA,CAAA,eAAY;AAEvD,wCAA2C,WAAW,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/schemas/index.js"],"sourcesContent":["import { z } from \"zod\";\n\nexport const LoginSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(3),\n});\n"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,cAAc,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAClC,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK;IACvB,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;AAC3B","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/models/user.js"],"sourcesContent":["export const runtime = \"nodejs\";\n\nimport { db } from \"@/lib/db\";\n\nexport async function getUserByEmail(email) {\n  try {\n    const user = await db.user.findUnique({ where: { email } });\n\n    return user;\n  } catch {\n    return null;\n  }\n}\n\nexport async function getUserById(id) {\n  try {\n    const user = await db.user.findUnique({ where: { id } });\n\n    return user;\n  } catch {\n    return null;\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFO,MAAM,UAAU;;AAIhB,eAAe,eAAe,KAAK;IACxC,IAAI;QACF,MAAM,OAAO,MAAM,yGAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;YAAE,OAAO;gBAAE;YAAM;QAAE;QAEzD,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe,YAAY,EAAE;IAClC,IAAI;QACF,MAAM,OAAO,MAAM,yGAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;YAAE,OAAO;gBAAE;YAAG;QAAE;QAEtD,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/auth.config.js"],"sourcesContent":["/* eslint-disable import/no-anonymous-default-export */\nimport bcriptjs from \"bcryptjs\";\n\nimport Credentials from \"next-auth/providers/credentials\";\nimport Google from \"next-auth/providers/google\";\nimport { LoginSchema } from \"@/schemas\";\nimport { getUserByEmail } from \"@/models/user\";\n\nexport default {\n  providers: [\n    Google({\n      clientId: process.env.GOOGLE_CLIENT_ID,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n    }),\n    Credentials({\n      async authorize(credentials) {\n        const validatedFields = LoginSchema.safeParse(credentials);\n\n        if (validatedFields.success) {\n          const { email, password } = validatedFields.data;\n\n          const user = await getUserByEmail(email);\n\n          if (!user) return null;\n\n          const passwordMatch = await bcriptjs.compare(password, user.password);\n\n          if (passwordMatch) return user;\n        }\n\n        return null;\n      },\n    }),\n  ],\n};\n"],"names":[],"mappings":"AAAA,qDAAqD;;;AACrD;AAEA;AAAA;AACA;AAAA;AACA;AACA;;;;;;uCAEe;IACb,WAAW;QACT,CAAA,GAAA,qJAAA,CAAA,UAAM,AAAD,EAAE;YACL,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAChD;QACA,CAAA,GAAA,0JAAA,CAAA,UAAW,AAAD,EAAE;YACV,MAAM,WAAU,WAAW;gBACzB,MAAM,kBAAkB,gHAAA,CAAA,cAAW,CAAC,SAAS,CAAC;gBAE9C,IAAI,gBAAgB,OAAO,EAAE;oBAC3B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,gBAAgB,IAAI;oBAEhD,MAAM,OAAO,MAAM,CAAA,GAAA,8GAAA,CAAA,iBAAc,AAAD,EAAE;oBAElC,IAAI,CAAC,MAAM,OAAO;oBAElB,MAAM,gBAAgB,MAAM,iIAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ;oBAEpE,IAAI,eAAe,OAAO;gBAC5B;gBAEA,OAAO;YACT;QACF;KACD;AACH","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/auth.js"],"sourcesContent":["import NextAuth from \"next-auth\";\nimport { PrismaAdapter } from \"@auth/prisma-adapter\";\n\nimport { db } from \"@/lib/db\";\nimport authConfig from \"@/auth.config\";\nimport { getUserById } from \"./models/user\";\n\nexport const {\n  handlers: { GET, POST },\n  signIn,\n  signOut,\n  auth,\n} = NextAuth({\n  // providers: [\n  //   Credentials({\n  //     credentials: {\n  //       email: {},\n  //       password: {},\n  //     },\n  //     authorize: async (credentials) => {\n  //       const user = await findUserByCredentials(\n  //         credentials.email,\n  //         credentials.password,\n  //       );\n\n  //       return user;\n  //     },\n  //   }),\n  // ],\n\n  pages: {\n    signIn: \"/login\",\n  },\n  events: {\n    async linkAccount({ user }) {},\n  },\n  callbacks: {\n    // async jwt({ token, user, trigger, session }) {\n    //   if (trigger === \"update\") {\n    //     return { ...token, ...session.user };\n    //   }\n\n    //   return { ...token, ...user };\n    // },\n    // async session({ session, token }) {\n    //   session.user = token;\n    //   return session;\n    // },\n    async session({ session, token, user }) {\n      if (token.sub && session.user) {\n        session.user.id = token.sub;\n      }\n\n      if (token.role && session.user) {\n        session.user.role = token.role;\n      }\n\n      // TÁ PORCO\n      session.user.phone = token.phone;\n\n      return session;\n    },\n    async jwt({ token }) {\n      if (!token.sub) return token;\n\n      const existingUser = await getUserById(token.sub);\n\n      if (!existingUser) return token;\n\n      token.role = existingUser.role;\n      token.phone = existingUser.phone;\n\n      return token;\n    },\n  },\n  adapter: PrismaAdapter(db),\n  session: { strategy: \"jwt\" },\n  ...authConfig,\n});\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AACA;AAEA;AACA;AACA;;;;;;AAEO,MAAM,EACX,UAAU,EAAE,GAAG,EAAE,IAAI,EAAE,EACvB,MAAM,EACN,OAAO,EACP,IAAI,EACL,GAAG,CAAA,GAAA,qJAAA,CAAA,UAAQ,AAAD,EAAE;IACX,eAAe;IACf,kBAAkB;IAClB,qBAAqB;IACrB,mBAAmB;IACnB,sBAAsB;IACtB,SAAS;IACT,0CAA0C;IAC1C,kDAAkD;IAClD,6BAA6B;IAC7B,gCAAgC;IAChC,WAAW;IAEX,qBAAqB;IACrB,SAAS;IACT,QAAQ;IACR,KAAK;IAEL,OAAO;QACL,QAAQ;IACV;IACA,QAAQ;QACN,MAAM,aAAY,EAAE,IAAI,EAAE,GAAG;IAC/B;IACA,WAAW;QACT,iDAAiD;QACjD,gCAAgC;QAChC,4CAA4C;QAC5C,MAAM;QAEN,kCAAkC;QAClC,KAAK;QACL,sCAAsC;QACtC,0BAA0B;QAC1B,oBAAoB;QACpB,KAAK;QACL,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE;YACpC,IAAI,MAAM,GAAG,IAAI,QAAQ,IAAI,EAAE;gBAC7B,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;YAC7B;YAEA,IAAI,MAAM,IAAI,IAAI,QAAQ,IAAI,EAAE;gBAC9B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAChC;YAEA,WAAW;YACX,QAAQ,IAAI,CAAC,KAAK,GAAG,MAAM,KAAK;YAEhC,OAAO;QACT;QACA,MAAM,KAAI,EAAE,KAAK,EAAE;YACjB,IAAI,CAAC,MAAM,GAAG,EAAE,OAAO;YAEvB,MAAM,eAAe,MAAM,CAAA,GAAA,8GAAA,CAAA,cAAW,AAAD,EAAE,MAAM,GAAG;YAEhD,IAAI,CAAC,cAAc,OAAO;YAE1B,MAAM,IAAI,GAAG,aAAa,IAAI;YAC9B,MAAM,KAAK,GAAG,aAAa,KAAK;YAEhC,OAAO;QACT;IACF;IACA,SAAS,CAAA,GAAA,oJAAA,CAAA,gBAAa,AAAD,EAAE,yGAAA,CAAA,KAAE;IACzB,SAAS;QAAE,UAAU;IAAM;IAC3B,GAAG,8GAAA,CAAA,UAAU;AACf","debugId":null}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/controllers/authController.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/db\";\nimport { z } from \"zod\";\nimport { hash } from \"bcryptjs\";\nimport { signIn, signOut } from \"@/auth\";\nimport { isRedirectError } from \"next/dist/client/components/redirect-error\";\n\nconst schema = z\n  .object({\n    name: z.string().min(3, \"Nome deve possui no mínimo 3 letras\"),\n    email: z.string().email(\"E-mail inválido\"),\n    phone: z\n      .string()\n      .min(10, \"Número de telefone inválido\")\n      .max(11, \"Número de telefone inválido\"),\n    password: z.string(),\n    confirmPassword: z.string().min(1, \"Confirme sua senha\"),\n  })\n  .refine((data) => data.password === data.confirmPassword, {\n    path: [\"confirmPassword\"],\n    message: \"As senhas não coicidem\",\n  });\n\nexport async function register(_prevState, formData) {\n  const entries = Array.from(formData.entries());\n  const data = Object.fromEntries(entries);\n\n  const result = schema.safeParse(data);\n\n  if (!result.success) {\n    return {\n      success: false,\n      errors: result.error.flatten().fieldErrors,\n    };\n  }\n\n  const existingEmail = await db.user.findUnique({\n    where: {\n      email: data.email,\n    },\n  });\n\n  const existingPhone = await db.user.findUnique({\n    where: {\n      phone: data.phone,\n    },\n  });\n\n  if (existingEmail) {\n    return {\n      success: false,\n      errors: { email: \"Esse e-mail já está cadastrado\" },\n    };\n  }\n\n  if (existingPhone) {\n    return {\n      success: false,\n      errors: { phone: \"Esse telefone já está cadastrado\" },\n    };\n  }\n\n  const hashedPassword = await hash(data.password, 10);\n\n  await db.user.create({\n    data: {\n      name: data.name,\n      email: data.email,\n      phone: data.phone,\n      password: hashedPassword,\n    },\n  });\n\n  // await signIn(\"credentials\", {\n  //   email: formData.get(\"email\"),\n  //   password: formData.get(\"password\"),\n  //   redirect: true,\n  //   redirectTo: \"/\",\n  // });\n}\n\nexport async function login(_prevState, formData) {\n  try {\n    // const teste = formData.get(\"email\")\n    // console.log(teste)\n    await signIn(\"credentials\", {\n      email: formData.get(\"email\"),\n      password: formData.get(\"password\"),\n      redirect: true,\n      redirectTo: \"/\",\n    });\n\n    return {\n      success: false,\n      error: \"E-mail ou senha incorretos\",\n    };\n  } catch (error) {\n    // Correção do erro nativo do auth.js (está em beta)\n    if (isRedirectError(error)) {\n      throw error;\n    }\n\n    if (error.type === \"CredentialsSignin\") {\n      return {\n        success: false,\n        error: \"E-mail e/ou senha incorretos\",\n      };\n    }\n  }\n}\n\nexport async function logout() {\n  await signOut({ redirectTo: \"/\" });\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;AAEA,MAAM,SAAS,oIAAA,CAAA,IAAC,CACb,MAAM,CAAC;IACN,MAAM,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,OAAO,oIAAA,CAAA,IAAC,CACL,MAAM,GACN,GAAG,CAAC,IAAI,+BACR,GAAG,CAAC,IAAI;IACX,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM;IAClB,iBAAiB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AACrC,GACC,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,KAAK,KAAK,eAAe,EAAE;IACxD,MAAM;QAAC;KAAkB;IACzB,SAAS;AACX;AAEK,eAAe,uCAAM,GAAN,SAAS,UAAU,EAAE,QAAQ;IACjD,MAAM,UAAU,MAAM,IAAI,CAAC,SAAS,OAAO;IAC3C,MAAM,OAAO,OAAO,WAAW,CAAC;IAEhC,MAAM,SAAS,OAAO,SAAS,CAAC;IAEhC,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO;YACL,SAAS;YACT,QAAQ,OAAO,KAAK,CAAC,OAAO,GAAG,WAAW;QAC5C;IACF;IAEA,MAAM,gBAAgB,MAAM,yGAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QAC7C,OAAO;YACL,OAAO,KAAK,KAAK;QACnB;IACF;IAEA,MAAM,gBAAgB,MAAM,yGAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QAC7C,OAAO;YACL,OAAO,KAAK,KAAK;QACnB;IACF;IAEA,IAAI,eAAe;QACjB,OAAO;YACL,SAAS;YACT,QAAQ;gBAAE,OAAO;YAAiC;QACpD;IACF;IAEA,IAAI,eAAe;QACjB,OAAO;YACL,SAAS;YACT,QAAQ;gBAAE,OAAO;YAAmC;QACtD;IACF;IAEA,MAAM,iBAAiB,MAAM,CAAA,GAAA,iIAAA,CAAA,OAAI,AAAD,EAAE,KAAK,QAAQ,EAAE;IAEjD,MAAM,yGAAA,CAAA,KAAE,CAAC,IAAI,CAAC,MAAM,CAAC;QACnB,MAAM;YACJ,MAAM,KAAK,IAAI;YACf,OAAO,KAAK,KAAK;YACjB,OAAO,KAAK,KAAK;YACjB,UAAU;QACZ;IACF;AAEA,gCAAgC;AAChC,kCAAkC;AAClC,wCAAwC;AACxC,oBAAoB;AACpB,qBAAqB;AACrB,MAAM;AACR;AAEO,eAAe,uCAAG,GAAH,MAAM,UAAU,EAAE,QAAQ;IAC9C,IAAI;QACF,sCAAsC;QACtC,qBAAqB;QACrB,MAAM,CAAA,GAAA,oGAAA,CAAA,SAAM,AAAD,EAAE,eAAe;YAC1B,OAAO,SAAS,GAAG,CAAC;YACpB,UAAU,SAAS,GAAG,CAAC;YACvB,UAAU;YACV,YAAY;QACd;QAEA,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,oDAAoD;QACpD,IAAI,CAAA,GAAA,yKAAA,CAAA,kBAAe,AAAD,EAAE,QAAQ;YAC1B,MAAM;QACR;QAEA,IAAI,MAAM,IAAI,KAAK,qBAAqB;YACtC,OAAO;gBACL,SAAS;gBACT,OAAO;YACT;QACF;IACF;AACF;AAEO,eAAe,uCAAI,GAAJ;IACpB,MAAM,CAAA,GAAA,oGAAA,CAAA,UAAO,AAAD,EAAE;QAAE,YAAY;IAAI;AAClC;;;IA1FsB;IA0DA;IA8BA;;AAxFA,+OAAA;AA0DA,+OAAA;AA8BA,+OAAA","debugId":null}},
    {"offset": {"line": 379, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/app/%28auth%29/login/login-form.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(auth)/login/login-form.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(auth)/login/login-form.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAmS,GAChU,iEACA","debugId":null}},
    {"offset": {"line": 462, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/app/%28auth%29/login/login-form.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(auth)/login/login-form.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(auth)/login/login-form.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA+Q,GAC5S,6CACA","debugId":null}},
    {"offset": {"line": 476, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/app/%28auth%29/login/page.jsx"],"sourcesContent":["\n\nimport { auth } from \"@/auth\";\nimport LoginForm from \"./login-form\";\nimport Link from \"next/link\";\nimport { redirect } from \"next/navigation\";\nimport { IoMdArrowBack } from \"react-icons/io\";\n\nexport default async function Login() {\n  const session = await auth();\n\n  if (session) return redirect(\"/\");\n\n  return (\n    <main className=\"flex h-screen flex-col items-center justify-center\">\n      <Link href=\"/\" className=\"mb-2 flex items-center gap-1 text-slate-600\">\n        <IoMdArrowBack />\n        Voltar\n      </Link>\n\n      <LoginForm />\n\n      <div className=\"pt-2\">\n        <p className=\"text-slate-600\">\n          Ainda não possui cadastro?{\" \"}\n          <Link href=\"/register\" className=\"text-primary-blue hover:underline\">\n            Registre-se\n          </Link>\n        </p>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAAA;AACA;;;;;;;AAEe,eAAe;IAC5B,MAAM,UAAU,MAAM,CAAA,GAAA,oGAAA,CAAA,OAAI,AAAD;IAEzB,IAAI,SAAS,OAAO,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IAE7B,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC,4JAAA,CAAA,UAAI;gBAAC,MAAK;gBAAI,WAAU;;kCACvB,8OAAC,8IAAA,CAAA,gBAAa;;;;;oBAAG;;;;;;;0BAInB,8OAAC,0IAAA,CAAA,UAAS;;;;;0BAEV,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;;wBAAiB;wBACD;sCAC3B,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;4BAAY,WAAU;sCAAoC;;;;;;;;;;;;;;;;;;;;;;;AAO/E","debugId":null}}]
}