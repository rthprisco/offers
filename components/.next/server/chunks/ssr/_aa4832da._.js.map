{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/controllers/authController.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/db\";\nimport { z } from \"zod\";\nimport { hash } from \"bcryptjs\";\nimport { signIn, signOut } from \"@/auth\";\nimport { isRedirectError } from \"next/dist/client/components/redirect-error\";\n\nconst schema = z\n  .object({\n    name: z.string().min(3, \"Nome deve possui no mínimo 3 letras\"),\n    email: z.string().email(\"E-mail inválido\"),\n    phone: z\n      .string()\n      .min(10, \"Número de telefone inválido\")\n      .max(11, \"Número de telefone inválido\"),\n    password: z.string(),\n    confirmPassword: z.string().min(1, \"Confirme sua senha\"),\n  })\n  .refine((data) => data.password === data.confirmPassword, {\n    path: [\"confirmPassword\"],\n    message: \"As senhas não coicidem\",\n  });\n\nexport async function register(_prevState, formData) {\n  const entries = Array.from(formData.entries());\n  const data = Object.fromEntries(entries);\n\n  const result = schema.safeParse(data);\n\n  if (!result.success) {\n    return {\n      success: false,\n      errors: result.error.flatten().fieldErrors,\n    };\n  }\n\n  const existingEmail = await db.user.findUnique({\n    where: {\n      email: data.email,\n    },\n  });\n\n  const existingPhone = await db.user.findUnique({\n    where: {\n      phone: data.phone,\n    },\n  });\n\n  if (existingEmail) {\n    return {\n      success: false,\n      errors: { email: \"Esse e-mail já está cadastrado\" },\n    };\n  }\n\n  if (existingPhone) {\n    return {\n      success: false,\n      errors: { phone: \"Esse telefone já está cadastrado\" },\n    };\n  }\n\n  const hashedPassword = await hash(data.password, 10);\n\n  await db.user.create({\n    data: {\n      name: data.name,\n      email: data.email,\n      phone: data.phone,\n      password: hashedPassword,\n    },\n  });\n\n  // await signIn(\"credentials\", {\n  //   email: formData.get(\"email\"),\n  //   password: formData.get(\"password\"),\n  //   redirect: true,\n  //   redirectTo: \"/\",\n  // });\n}\n\nexport async function login(_prevState, formData) {\n  try {\n    // const teste = formData.get(\"email\")\n    // console.log(teste)\n    await signIn(\"credentials\", {\n      email: formData.get(\"email\"),\n      password: formData.get(\"password\"),\n      redirect: true,\n      redirectTo: \"/\",\n    });\n\n    return {\n      success: false,\n      error: \"E-mail ou senha incorretos\",\n    };\n  } catch (error) {\n    // Correção do erro nativo do auth.js (está em beta)\n    if (isRedirectError(error)) {\n      throw error;\n    }\n\n    if (error.type === \"CredentialsSignin\") {\n      return {\n        success: false,\n        error: \"E-mail e/ou senha incorretos\",\n      };\n    }\n  }\n}\n\nexport async function logout() {\n  await signOut({ redirectTo: \"/\" });\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;AAEA,MAAM,SAAS,oIAAA,CAAA,IAAC,CACb,MAAM,CAAC;IACN,MAAM,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,OAAO,oIAAA,CAAA,IAAC,CACL,MAAM,GACN,GAAG,CAAC,IAAI,+BACR,GAAG,CAAC,IAAI;IACX,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM;IAClB,iBAAiB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AACrC,GACC,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,KAAK,KAAK,eAAe,EAAE;IACxD,MAAM;QAAC;KAAkB;IACzB,SAAS;AACX;AAEK,eAAe,uCAAM,GAAN,SAAS,UAAU,EAAE,QAAQ;IACjD,MAAM,UAAU,MAAM,IAAI,CAAC,SAAS,OAAO;IAC3C,MAAM,OAAO,OAAO,WAAW,CAAC;IAEhC,MAAM,SAAS,OAAO,SAAS,CAAC;IAEhC,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO;YACL,SAAS;YACT,QAAQ,OAAO,KAAK,CAAC,OAAO,GAAG,WAAW;QAC5C;IACF;IAEA,MAAM,gBAAgB,MAAM,yGAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QAC7C,OAAO;YACL,OAAO,KAAK,KAAK;QACnB;IACF;IAEA,MAAM,gBAAgB,MAAM,yGAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QAC7C,OAAO;YACL,OAAO,KAAK,KAAK;QACnB;IACF;IAEA,IAAI,eAAe;QACjB,OAAO;YACL,SAAS;YACT,QAAQ;gBAAE,OAAO;YAAiC;QACpD;IACF;IAEA,IAAI,eAAe;QACjB,OAAO;YACL,SAAS;YACT,QAAQ;gBAAE,OAAO;YAAmC;QACtD;IACF;IAEA,MAAM,iBAAiB,MAAM,CAAA,GAAA,iIAAA,CAAA,OAAI,AAAD,EAAE,KAAK,QAAQ,EAAE;IAEjD,MAAM,yGAAA,CAAA,KAAE,CAAC,IAAI,CAAC,MAAM,CAAC;QACnB,MAAM;YACJ,MAAM,KAAK,IAAI;YACf,OAAO,KAAK,KAAK;YACjB,OAAO,KAAK,KAAK;YACjB,UAAU;QACZ;IACF;AAEA,gCAAgC;AAChC,kCAAkC;AAClC,wCAAwC;AACxC,oBAAoB;AACpB,qBAAqB;AACrB,MAAM;AACR;AAEO,eAAe,uCAAG,GAAH,MAAM,UAAU,EAAE,QAAQ;IAC9C,IAAI;QACF,sCAAsC;QACtC,qBAAqB;QACrB,MAAM,CAAA,GAAA,oGAAA,CAAA,SAAM,AAAD,EAAE,eAAe;YAC1B,OAAO,SAAS,GAAG,CAAC;YACpB,UAAU,SAAS,GAAG,CAAC;YACvB,UAAU;YACV,YAAY;QACd;QAEA,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,oDAAoD;QACpD,IAAI,CAAA,GAAA,yKAAA,CAAA,kBAAe,AAAD,EAAE,QAAQ;YAC1B,MAAM;QACR;QAEA,IAAI,MAAM,IAAI,KAAK,qBAAqB;YACtC,OAAO;gBACL,SAAS;gBACT,OAAO;YACT;QACF;IACF;AACF;AAEO,eAAe,uCAAI,GAAJ;IACpB,MAAM,CAAA,GAAA,oGAAA,CAAA,UAAO,AAAD,EAAE;QAAE,YAAY;IAAI;AAClC;;;IA1FsB;IA0DA;IA8BA;;AAxFA,+OAAA;AA0DA,+OAAA;AA8BA,+OAAA","debugId":null}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/lib/auth.js"],"sourcesContent":["import { auth } from \"@/auth\";\n\nexport async function currentUser() {\n  const session = await auth();\n\n  return session?.user;\n}\n"],"names":[],"mappings":";;;AAAA;;AAEO,eAAe;IACpB,MAAM,UAAU,MAAM,CAAA,GAAA,oGAAA,CAAA,OAAI,AAAD;IAEzB,OAAO,SAAS;AAClB","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/app/%28dashboard%29/my-account/actions.jsx"],"sourcesContent":["\"use server\";\r\n\r\nimport { db } from \"@/lib/db\";\r\nimport { currentUser } from \"@/lib/auth\";\r\nimport { signOut } from \"@/auth\";\r\n\r\nexport async function deleteAccount() {\r\n  const user = await currentUser();\r\n\r\n  if (!user || !user.id) {\r\n    throw new Error(\"Usuário não autenticado\");\r\n  }\r\n\r\n  await db.user.delete({\r\n    where: { id: user.id },\r\n  });\r\n\r\n  // Faz logout automático após deletar\r\n  await signOut({ redirectTo: \"/\" });\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;;;AAEO,eAAe,uCAAW,GAAX;IACpB,MAAM,OAAO,MAAM,CAAA,GAAA,2GAAA,CAAA,cAAW,AAAD;IAE7B,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,yGAAA,CAAA,KAAE,CAAC,IAAI,CAAC,MAAM,CAAC;QACnB,OAAO;YAAE,IAAI,KAAK,EAAE;QAAC;IACvB;IAEA,qCAAqC;IACrC,MAAM,CAAA,GAAA,oGAAA,CAAA,UAAO,AAAD,EAAE;QAAE,YAAY;IAAI;AAClC;;;IAbsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/app/%28dashboard%29/my-account/user-info.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/app/%28dashboard%29/my-account/user-info.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/app/%28dashboard%29/my-account/user-info.jsx"],"sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import Form from \"next/form\";\n// import { InputField } from \"@/components/ui/input-field\";\n// import { Button } from \"@/components/ui/button\";\n\n// export default function UserInfo({ label, user }) {\n//   return (\n//     <Form\n//       className=\"w-[400px] rounded-lg bg-white px-8 py-6 shadow-md\"\n//     >\n//       <h3 className=\"text-xl\">{label}</h3>\n//       <p>ID: {user.id}</p>\n//       <div className=\"flex flex-col gap-3 py-6\">\n//         <input\n//           type=\"text\"\n//           name=\"id\"\n//           value={user.id}\n//           hidden\n//           disabled\n//         />\n//         <InputField label=\"Nome\" type=\"text\" name=\"name\" value={user?.name} />\n//         <InputField\n//           label=\"E-mail\"\n//           type=\"email\"\n//           name=\"email\"\n//           value={user?.email}\n//         />\n//         <InputField\n//           label=\"Telefone\"\n//           type=\"text\"\n//           name=\"phone\"\n//           value={user?.phone}\n//         />\n//       </div>\n//       <Button type=\"submit\">Salvar alterações</Button>\n      \n      \n//     </Form>\n    \n//   );\n// }\n"],"names":[],"mappings":"AAiBA,gCAAgC;AAChC,4DAA4D;AAC5D,mDAAmD;AAEnD,sDAAsD;AACtD,aAAa;AACb,YAAY;AACZ,sEAAsE;AACtE,QAAQ;AACR,6CAA6C;AAC7C,6BAA6B;AAC7B,mDAAmD;AACnD,iBAAiB;AACjB,wBAAwB;AACxB,sBAAsB;AACtB,4BAA4B;AAC5B,mBAAmB;AACnB,qBAAqB;AACrB,aAAa;AACb,iFAAiF;AACjF,sBAAsB;AACtB,2BAA2B;AAC3B,yBAAyB;AACzB,yBAAyB;AACzB,gCAAgC;AAChC,aAAa;AACb,sBAAsB;AACtB,6BAA6B;AAC7B,wBAAwB;AACxB,yBAAyB;AACzB,gCAAgC;AAChC,aAAa;AACb,eAAe;AACf,yDAAyD;AAGzD,cAAc;AAEd,OAAO;AACP,IAAI","debugId":null}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/app/%28dashboard%29/my-account/update-form.jsx"],"sourcesContent":["// import { useCurrentUser } from \"@/hooks/use-current-user\";\nimport { currentUser } from \"@/lib/auth\";\nimport UserInfo from \"./user-info\";\n\nexport default async function UpdateForm() {\n  // const user = useCurrentUser();\n  const user = await currentUser();\n\n  return <UserInfo label=\"Minha conta\" user={user} />;\n}\n"],"names":[],"mappings":"AAAA,6DAA6D;;;;;AAC7D;AACA;;;;AAEe,eAAe;IAC5B,iCAAiC;IACjC,MAAM,OAAO,MAAM,CAAA,GAAA,2GAAA,CAAA,cAAW,AAAD;IAE7B,qBAAO,8OAAC,sJAAA,CAAA,UAAQ;QAAC,OAAM;QAAc,MAAM;;;;;;AAC7C","debugId":null}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/app/%28dashboard%29/my-account/delete-account-form.jsx"],"sourcesContent":["// \"use client\";\r\n// import { deleteAccount } from \"./actions\";\r\n// import { useFormStatus } from \"react-dom\";\r\n\r\n// export default function DeleteAccountForm() {\r\n// const { pending } = useFormStatus();\r\n\r\n//   return (\r\n//     <form action={deleteAccount}>\r\n//       <button\r\n//         type=\"submit\"\r\n//         className=\"bg-red-500 text-white px-4 py-2 rounded\"\r\n//         disabled={pending}\r\n//       >\r\n//         {pending ? \"Deletando...\" : \"Deletar minha conta\"}\r\n//       </button>\r\n//     </form>\r\n//   );\r\n// }\r\n\r\n\r\nexport default function DeleteAccountForm() {\r\n  return (\r\n    <form action={deleteAccount}>\r\n      <button type=\"submit\">Deletar minha conta</button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,gBAAgB;AAChB,6CAA6C;AAC7C,6CAA6C;AAE7C,gDAAgD;AAChD,uCAAuC;AAEvC,aAAa;AACb,oCAAoC;AACpC,gBAAgB;AAChB,wBAAwB;AACxB,8DAA8D;AAC9D,6BAA6B;AAC7B,UAAU;AACV,6DAA6D;AAC7D,kBAAkB;AAClB,cAAc;AACd,OAAO;AACP,IAAI;;;;;;AAGW,SAAS;IACtB,qBACE,8OAAC;QAAK,QAAQ;kBACZ,cAAA,8OAAC;YAAO,MAAK;sBAAS;;;;;;;;;;;AAG5B","debugId":null}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/app/%28dashboard%29/my-account/page.jsx"],"sourcesContent":["import UpdateForm from \"./update-form\";\nimport DeleteAccountForm from \"./delete-account-form\";\n\nexport default function MyAccount() {\n  return (\n    <div className=\"w-[560px]\">\n      <h2 className=\"m-6 text-3xl\">Minha conta</h2>\n\n      <UpdateForm />\n      <DeleteAccountForm />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAe;;;;;;0BAE7B,8OAAC,wJAAA,CAAA,UAAU;;;;;0BACX,8OAAC,mKAAA,CAAA,UAAiB;;;;;;;;;;;AAGxB","debugId":null}}]
}