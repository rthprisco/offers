{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Gabriel%20Dias/Desktop/offers-main/components/shopping-list.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\n\nexport default function ShoppingList({ userId }) {\n  const [item, setItem] = useState(\"\");\n  const [list, setList] = useState([]);\n  const [saved, setSaved] = useState(false);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  useEffect(() => {\n    if (userId) {\n      const saved = localStorage.getItem(`shopping-list-${userId}`);\n      if (saved) {\n        setList(JSON.parse(saved));\n      }\n      setIsLoaded(true);\n    }\n  }, [userId]);\n\n  useEffect(() => {\n    if (userId && isLoaded) {\n      localStorage.setItem(`shopping-list-${userId}`, JSON.stringify(list));\n    }\n  }, [list, userId, isLoaded]);\n\n  const handleAdd = (e) => {\n    e.preventDefault();\n    if (item.trim() === \"\") return;\n    setList([...list, { name: item, isPurchased: false }]);\n    setItem(\"\");\n    setSaved(false);\n  };\n\n  const togglePurchased = (index) => {\n    setList(\n      list.map((el, i) =>\n        i === index ? { ...el, isPurchased: !el.isPurchased } : el\n      )\n    );\n    setSaved(false);\n  };\n\n  const removeItem = (index) => {\n    setList(list.filter((_, i) => i !== index));\n    setSaved(false);\n  };\n\n  const handleClear = () => {\n    setList([]);\n    if (userId) {\n      localStorage.removeItem(`shopping-list-${userId}`);\n    }\n    setSaved(false);\n  };\n\n  const handleSave = async () => {\n    if (!userId) return;\n\n    try {\n      const res = await fetch(\"/api/save-list\", {\n        method: \"POST\",\n        body: JSON.stringify({ userId, list }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n\n      const result = await res.json();\n      if (result.success) {\n        setSaved(true);\n      } else {\n        console.error(\"Erro ao salvar:\", result.error);\n      }\n    } catch (err) {\n      console.error(\"Erro na requisição:\", err);\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto bg-white rounded-lg shadow p-6 mt-8\">\n      <h2 className=\"text-2xl font-bold mb-4 text-center\">Lista de Compras</h2>\n      <form onSubmit={handleAdd} className=\"flex gap-2 mb-4\">\n        <input\n          type=\"text\"\n          value={item}\n          onChange={(e) => setItem(e.target.value)}\n          placeholder=\"Adicionar item\"\n          className=\"flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400\"\n        />\n        <button\n          type=\"submit\"\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition\"\n        >\n          Adicionar\n        </button>\n      </form>\n      <div className=\"flex gap-2 mb-4\">\n        <button\n          onClick={handleClear}\n          className=\"flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300 transition\"\n        >\n          Limpar lista\n        </button>\n        <button\n          onClick={handleSave}\n          className=\"flex-1 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition\"\n        >\n          Salvar lista\n        </button>\n      </div>\n      {saved && (\n        <div className=\"mb-4 text-green-600 text-center font-medium\">\n          Lista salva com sucesso!\n        </div>\n      )}\n      <ul className=\"list-none p-0 mt-4\">\n        {list.map((el, idx) => (\n          <li\n            key={idx}\n            className={`flex items-center mb-2 px-2 py-1 rounded ${\n              el.isPurchased ? \"bg-gray-100\" : \"\"\n            }`}\n          >\n            <input\n              type=\"checkbox\"\n              checked={el.isPurchased}\n              onChange={() => togglePurchased(idx)}\n              className=\"mr-2 accent-blue-500\"\n            />\n            <span\n              className={`flex-1 ${\n                el.isPurchased ? \"line-through text-gray-400\" : \"\"\n              }`}\n            >\n              {el.name}\n            </span>\n            <button\n              onClick={() => removeItem(idx)}\n              className=\"ml-2 text-red-500 hover:text-red-700 transition\"\n              title=\"Remover\"\n            >\n              Remover\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}